Here the nginx reverse proxy config for multiple subdomains on one host with cloudflare ssl certs.

HTTP redirect not needed, cloudflare is doing.
